<ion-header class="ion-no-border">
  <ion-toolbar mode="md">
    <ion-buttons slot="start">
      <ion-button (click)="onBack()">
        <ion-icon slot="icon-only" name="arrow-back" color="dark"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Crear nueva cuenta</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form #registerForm="ngForm" (ngSubmit)="onRegister()">

    <ion-item>
      <div class="input_box">
        <ion-input type="text" [(ngModel)]="newUser.nombreCompleto" name="nombreCompleto" #nombreCompletoRef="ngModel" required placeholder="Nombre completo" ngModel></ion-input>
      </div>
      <ion-icon slot="end" name="person-outline" class="toggle_btn"></ion-icon>
    </ion-item>
    <br>
  
    <ion-item>
      <div class="input_box">
        <ion-input type="email" [(ngModel)]="newUser.correo" name="correo" #correoRef="ngModel" required email placeholder="Correo" ngModel></ion-input>
      </div>
      <ion-icon slot="end" name="mail-outline" class="toggle_btn"></ion-icon>
    </ion-item>
    <br>
  
    <ion-item>
      <div class="input_box">
        <ion-input [type]="viewPassword ? 'text' : 'password'" [(ngModel)]="newUser.contrasenia" name="contrasenia" #contraseniaRef="ngModel" required [pattern]="passwordPattern" placeholder="Contraseña" ngModel></ion-input>
      </div>
      <ion-button (click)="changeType()" fill="clear" slot="end" class="toggle_btn" color="dark">
        <ion-icon slot="icon-only" [name]="viewPassword == true ? 'eye-outline' : 'eye-off-outline'"></ion-icon>
      </ion-button>
    </ion-item>
    <br>
  
    <ion-item>
      <ion-input type="date" [(ngModel)]="newUser.fechaDeNacimiento" name="fechaDeNacimiento" #fechaDeNacimientoRef="ngModel" required [min]="minDate" [max]="maxDate" ngModel></ion-input>
    </ion-item>
    <br>
  
    <ion-item>
      <ion-select placeholder="Género" [(ngModel)]="newUser.genero" name="genero" #generoRef="ngModel" required ngModel>
        <ion-select-option value="Masculino">Masculino</ion-select-option>
        <ion-select-option value="Femenino">Femenino</ion-select-option>
        <ion-select-option value="Otro">Otro</ion-select-option>
      </ion-select>
      <ion-icon slot="end" name="accessibility-outline" class="toggle_btn"></ion-icon>
      
    </ion-item>
    <br>
  
    <ion-button type="submit" expand="block" shape="round" class="login-btn">
      Registrarse
    </ion-button>
  </form>

  <br>

  <div *ngIf="submitAttempted && nombreCompletoRef.errors?.['required']" class="error-message">
    El nombre completo es requerido.
  </div>
  <div *ngIf="submitAttempted && correoRef.errors?.['required']" class="error-message">
    El correo es requerido.
  </div>
  <div *ngIf="submitAttempted && correoRef.errors?.['email']" class="error-message">
    Por favor introduce un correo válido.
  </div>
  <div *ngIf="submitAttempted && contraseniaRef.errors?.['required']" class="error-message">
    La contraseña es requerida.
  </div>
  <div *ngIf="submitAttempted && contraseniaRef.errors?.['pattern']" class="error-message">
    La contraseña debe tener al menos 8 caracteres, incluir mayúsculas, minúsculas, un número y un caracter especial.
  </div>
  <div *ngIf="submitAttempted && fechaDeNacimientoRef.errors?.['required']" class="error-message">
    La fecha de nacimiento es requerida.
  </div>
  <div *ngIf="submitAttempted && fechaDeNacimientoRef.errors?.['min']" class="error-message">
    echa fuera del rango permitido.
  </div>
  <div *ngIf="submitAttempted && generoRef.errors?.['required']" class="error-message">
    El género es requerido.
  </div>

  <div class="register">
    <p>Ya tengo una cuenta</p>
    <div class="regiterBtn ion-activatable ripple-parent" (click)="onBack()">
      <p>Iniciar Sesión</p>
      <ion-ripple-effect></ion-ripple-effect>
    </div>
  </div>

</ion-content>