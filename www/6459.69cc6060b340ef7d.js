"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6459],{6459:(U,p,l)=>{l.r(p),l.d(p,{EditProfilePageModule:()=>y});var m=l(6019),c=l(9010),i=l(6371),f=l(8725),u=l(8239),g=l(5895),e=l(865),P=l(7524);function _(o,s){1&o&&(e.TgZ(0,"div",20),e._uU(1," El nombre completo es requerido. "),e.qZA())}function b(o,s){1&o&&(e.TgZ(0,"div",20),e._uU(1," La contrase\xf1a es requerida "),e.qZA())}function v(o,s){1&o&&(e.TgZ(0,"div",20),e._uU(1," La contrase\xf1a debe tener al menos 8 caracteres, incluir may\xfasculas, min\xfasculas, un n\xfamero y un caracter especial. "),e.qZA())}function Z(o,s){1&o&&(e.TgZ(0,"div",20),e._uU(1," Las contrase\xf1as no coinciden. "),e.qZA())}const C=[{path:"",component:(()=>{class o{constructor(n,t,a,r){this.actionSheetCtrl=n,this.navCtrl=t,this.userService=a,this.alertController=r,this.id="",this.correo="",this.fechaDeNacimiento="",this.genero="",this.nombreCompleto="",this.imagenPerfil="",this.viewPassword=!1,this.passwordPattern=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_\-+=\[\]{}|\\:;"'<>,.?/])[A-Za-z\d!@#$%^&*()_\-+=\[\]{}|\\:;"'<>,.?/]{8,}$/,this.updatedUser={nombreCompleto:"",contrasenia:""},this.submitAttempted=!1,this.password="",this.confirmPassword="",this.passwordsDontMatch=!1}ngOnInit(){const n=localStorage.getItem("id");this.id=this.userService.decrypt(n),this.getInformation()}getInformation(){this.userService.getUser(this.id).subscribe(n=>{this.correo=n.correo,this.fechaDeNacimiento=n.fechaDeNacimiento,this.genero=n.genero,this.nombreCompleto=n.nombreCompleto,this.imagenPerfil=n.imagenPerfil})}changeType(){this.viewPassword=!this.viewPassword}goBack(){this.navCtrl.back()}updateUser(n){var t=this;return(0,u.Z)(function*(){t.submitAttempted=!0,t.password===t.confirmPassword?(t.passwordsDontMatch=!1,n.valid&&(t.updatedUser.nombreCompleto=t.nombreCompleto,t.updatedUser.contrasenia=t.password,console.log(t.id),console.log(t.updatedUser),t.userService.updateUser(t.id,t.updatedUser).subscribe(function(){var a=(0,u.Z)(function*(r){console.log(r),"Informaci\xf3n actualizada de forma correcta"===r?yield(yield t.alertController.create({header:"\xc9xito",message:"La informaci\xf3n se ha actualizado correctamente.",buttons:["OK"]})).present():yield(yield t.alertController.create({header:"Error",message:"Hubo un problema al actualizar la informaci\xf3n. Por favor, int\xe9ntalo de nuevo.",buttons:["OK"]})).present()});return function(r){return a.apply(this,arguments)}}()))):t.passwordsDontMatch=!0})()}getImage(){var n=this;return(0,u.Z)(function*(){const t=[{text:"Tomar foto",icon:"camera",handler:()=>{n.takePicture(g.oK.Camera)}},{text:"Galer\xeda",icon:"image",handler:()=>{n.takePicture(g.oK.Photos)}},{text:"Cancelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}];yield(yield n.actionSheetCtrl.create({header:"Seleccionar Avatar",mode:"md",buttons:t})).present()})()}takePicture(n){var t=this;return(0,u.Z)(function*(){try{const r=(yield g.V1.getPhoto({quality:90,allowEditing:!1,resultType:g.dk.Uri,source:n})).webPath,A=yield(yield fetch(r)).blob(),T=new File([A],"filename.jpeg",{type:"image/jpeg"});t.userService.updateProfilePicture(t.id,T).subscribe(function(){var w=(0,u.Z)(function*(h){"Imagen de perfil actualizada de forma correcta"===h?(yield(yield t.alertController.create({header:"\xc9xito",message:"Imagen de perfil actualizada de forma correcta.",buttons:["OK"]})).present(),t.getInformation()):yield(yield t.alertController.create({header:"Error",message:"Error al actualizar la imagen de perfil.",buttons:["OK"]})).present()});return function(h){return w.apply(this,arguments)}}())}catch(a){console.log(a)}})()}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(i.BX),e.Y36(i.SH),e.Y36(P.K),e.Y36(i.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-profile"]],decls:33,vars:16,consts:[["mode","ios",1,"ion-no-border"],["fill","clear","mode","ios","slot","start",3,"click"],["name","arrow-back-outline"],[1,"edit_profile_main_content"],[1,"user_image","bg_image",3,"click"],[1,"input_box"],["type","text","placeholder","Correo","disabled","",3,"value"],["type","text","placeholder","Fecha de nacimiento","disabled","",3,"value"],["type","text","placeholder","Genero","disabled","",3,"value"],[3,"ngSubmit"],["updateForm","ngForm"],["type","text","placeholder","Nombre completo","name","nombreCompleto","required","","ngModel","",3,"ngModel","ngModelChange"],["nombreCompletoRef","ngModel"],["name","password","required","","placeholder","Contrase\xf1a","ngModel","",3,"type","ngModel","pattern","ngModelChange"],["passwordRef","ngModel"],["fill","clear","slot","end",1,"toggle_btn",3,"click"],["slot","icon-only",3,"name"],["name","confirmPassword","required","","placeholder","Confirmar contrase\xf1a","ngModel","",3,"type","ngModel","ngModelChange"],["class","error-message",4,"ngIf"],["type","submit","expand","block","mode","ios"],[1,"error-message"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-button",1),e.NdJ("click",function(){return t.goBack()}),e._UZ(3,"ion-icon",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Actualizar informaci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content"),e.TgZ(7,"div",3),e.TgZ(8,"div",4),e.NdJ("click",function(){return t.getImage()}),e.qZA(),e.TgZ(9,"div",5),e._UZ(10,"ion-input",6),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"ion-input",7),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"ion-input",8),e.qZA(),e.TgZ(15,"form",9,10),e.NdJ("ngSubmit",function(){e.CHM(a);const d=e.MAs(16);return t.updateUser(d)}),e.TgZ(17,"div",5),e.TgZ(18,"ion-input",11,12),e.NdJ("ngModelChange",function(d){return t.nombreCompleto=d}),e.qZA(),e.qZA(),e.TgZ(20,"div",5),e.TgZ(21,"ion-input",13,14),e.NdJ("ngModelChange",function(d){return t.password=d}),e.qZA(),e.TgZ(23,"ion-button",15),e.NdJ("click",function(){return t.changeType()}),e._UZ(24,"ion-icon",16),e.qZA(),e.qZA(),e.TgZ(25,"div",5),e.TgZ(26,"ion-input",17),e.NdJ("ngModelChange",function(d){return t.confirmPassword=d}),e.qZA(),e.qZA(),e.YNc(27,_,2,0,"div",18),e.YNc(28,b,2,0,"div",18),e.YNc(29,v,2,0,"div",18),e.YNc(30,Z,2,0,"div",18),e.TgZ(31,"ion-button",19),e._uU(32," Actualizar Informaci\xf3n "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const a=e.MAs(19),r=e.MAs(22);e.xp6(8),e.Udp("background-image","url("+(t.imagenPerfil?t.imagenPerfil:"assets/imgs/hombre.png")+")"),e.xp6(2),e.s9C("value",t.correo),e.xp6(2),e.s9C("value",t.fechaDeNacimiento),e.xp6(2),e.s9C("value",t.genero),e.xp6(4),e.Q6J("ngModel",t.nombreCompleto),e.xp6(3),e.Q6J("type",t.viewPassword?"text":"password")("ngModel",t.password)("pattern",t.passwordPattern),e.xp6(3),e.Q6J("name",t.viewPassword?"eye-outline":"eye-off-outline"),e.xp6(2),e.Q6J("type",t.viewPassword?"text":"password")("ngModel",t.confirmPassword),e.xp6(1),e.Q6J("ngIf",t.submitAttempted&&(null==a.errors?null:a.errors.required)),e.xp6(1),e.Q6J("ngIf",t.submitAttempted&&(null==r.errors?null:r.errors.required)),e.xp6(1),e.Q6J("ngIf",t.submitAttempted&&(null==r.errors?null:r.errors.pattern)),e.xp6(1),e.Q6J("ngIf",t.submitAttempted&&t.passwordsDontMatch)}},directives:[i.Gu,i.sr,i.YG,i.gu,i.wd,i.W2,i.pK,i.j9,c._Y,c.JL,c.F,c.Q7,c.JJ,c.On,c.c5,m.O5],styles:['@charset "UTF-8";.edit_profile_main_content[_ngcontent-%COMP%]{padding:16px}.edit_profile_main_content[_ngcontent-%COMP%]   .user_image[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100%;display:block;margin:40px auto}.edit_profile_main_content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:30px}.edit_profile_main_content[_ngcontent-%COMP%]   .input_box[_ngcontent-%COMP%]{background:white;border-radius:8px;margin-bottom:16px;padding:5px 12px;position:relative}.edit_profile_main_content[_ngcontent-%COMP%]   .input_box[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-family:"regular";text-align:start;width:calc(100% - 40px)}.edit_profile_main_content[_ngcontent-%COMP%]   .toggle_btn[_ngcontent-%COMP%]{position:absolute;top:50%;right:12px;transform:translateY(-120%)}.error-message[_ngcontent-%COMP%]{color:red;font-size:.8em}']}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(C)],f.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.ez,c.u5,i.Pc,M]]}),o})()}}]);