"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2085],{2085:(M,g,r)=>{r.r(g),r.d(g,{AfluenciaDetailPageModule:()=>x});var s=r(6019),u=r(9010),i=r(6371),l=r(8725),e=r(865),f=r(4522);let m=(()=>{class t{constructor(n){this.http=n,this.apiUrl="https://metrotrackerbackend.onrender.com/api"}getAfluencias(n,o){return this.http.post(`${this.apiUrl}/afluencias`,{linea:n,direccion:o})}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(f.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function d(t,a){if(1&t&&(e.TgZ(0,"ion-item"),e.TgZ(1,"ion-thumbnail",0),e._UZ(2,"img",7),e.qZA(),e.TgZ(3,"div",8),e._UZ(4,"ion-progress-bar",9),e.TgZ(5,"div",10),e._uU(6),e.qZA(),e.TgZ(7,"div",11),e._uU(8),e.ALo(9,"date"),e.qZA(),e.qZA(),e.qZA()),2&t){const n=a.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("src",n.icono,e.LSH),e.xp6(1),e.Q6J("ngClass",o.getProgressBarClass(n.afluencia)),e.xp6(1),e.Q6J("value",n.afluencia/100)("ngClass",o.getProgressBarClass(n.afluencia)),e.xp6(2),e.AsE("",o.getProgressLabel(n.afluencia)," (",n.afluencia,"%)"),e.xp6(2),e.Oqu(e.xi3(9,7,n.timestamp,"dd/MM/yyyy HH:mm"))}}function p(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-list"),e.YNc(2,d,10,10,"ion-item",6),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.afluencias)}}function A(t,a){if(1&t&&(e.TgZ(0,"ion-item"),e.TgZ(1,"ion-thumbnail",0),e._UZ(2,"img",7),e.qZA(),e._UZ(3,"div",12),e.qZA()),2&t){const n=a.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("src",n.icono,e.LSH),e.xp6(1),e.Q6J("ngClass",o.getSemaforoColor(n.afluencia))}}function h(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-list"),e.YNc(2,A,4,2,"ion-item",6),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.afluencias)}}const b=[{path:"",component:(()=>{class t{constructor(n,o){this.route=n,this.afluenciaService=o,this.linea="",this.direccion="",this.afluencias=[],this.configMode="basica",this.semaforoConfig=[{max:33,color:"verde"},{max:66,color:"amarillo"},{max:100,color:"rojo"}]}ngOnInit(){this.route.queryParamMap.subscribe(n=>{this.linea=n.get("linea"),this.direccion=n.get("direccion"),this.cargarAfluencias(this.linea,this.direccion)})}cargarAfluencias(n,o){this.afluenciaService.getAfluencias(n,o).subscribe({next:c=>{this.afluencias=c},error:c=>{console.error("Hubo un error al obtener las afluencias:",c)}})}getProgressBarClass(n){return n<=20?"progress-muy-baja":n<=40?"progress-baja":n<=60?"progress-moderada":n<=80?"progress-alta":"progress-maxima"}getProgressLabel(n){return n<=20?"Muy Baja":n<=40?"Baja":n<=60?"Moderada":n<=80?"Alta":"M\xe1xima"}getSemaforoColor(n){for(let o of this.semaforoConfig)if(n<=o.max)return o.color;return"rojo"}toggleConfigMode(){this.configMode="basica"===this.configMode?"detallada":"basica"}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.gz),e.Y36(m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-afluencia-detail"]],decls:12,vars:3,consts:[["slot","start"],["defaultHref","/tabs/tab1"],["slot","end"],[3,"click"],["name","settings-outline"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src"],[1,"progress-container",3,"ngClass"],[3,"value","ngClass"],[1,"progress-label"],[1,"timestamp-label"],[1,"semaforo",3,"ngClass"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.qZA(),e.TgZ(6,"ion-buttons",2),e.TgZ(7,"ion-button",3),e.NdJ("click",function(){return o.toggleConfigMode()}),e._UZ(8,"ion-icon",4),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"ion-content"),e.YNc(10,p,3,1,"ng-container",5),e.YNc(11,h,3,1,"ng-container",5),e.qZA()),2&n&&(e.xp6(5),e.hij("Direccion ",o.direccion,""),e.xp6(5),e.Q6J("ngIf","detallada"===o.configMode),e.xp6(1),e.Q6J("ngIf","basica"===o.configMode))},directives:[i.Gu,i.sr,i.Sm,i.oU,i.cs,i.wd,i.YG,i.gu,i.W2,s.O5,i.q_,s.sg,i.Ie,i.Bs,s.mk,i.X7],pipes:[s.uU],styles:['@charset "UTF-8";.progress-muy-baja[_ngcontent-%COMP%]{--progress-background: #ADFF2F}.progress-baja[_ngcontent-%COMP%]{--progress-background: green}.progress-moderada[_ngcontent-%COMP%]{--progress-background: #FFD700}.progress-alta[_ngcontent-%COMP%]{--progress-background: #FF4500}.progress-maxima[_ngcontent-%COMP%]{--progress-background: red}ion-thumbnail[_ngcontent-%COMP%]{--size: auto;width:6rem;height:6rem}.progress-label[_ngcontent-%COMP%]{text-align:center}.progress-container[_ngcontent-%COMP%]{width:100%}ion-segment[_ngcontent-%COMP%]{--background: #db54a3}ion-segment[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff!important}.semaforo[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-weight:bold;margin:0 auto}.verde[_ngcontent-%COMP%]{background-color:green}.amarillo[_ngcontent-%COMP%]{background-color:#ff0}.rojo[_ngcontent-%COMP%]{background-color:red}.progress-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start}.progress-label[_ngcontent-%COMP%]{font-size:1em;margin-top:5px}.timestamp-label[_ngcontent-%COMP%]{font-size:.8em;color:gray;margin-top:3px}']}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.Bz.forChild(b)],l.Bz]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[s.ez,u.u5,i.Pc,P]]}),t})()}}]);