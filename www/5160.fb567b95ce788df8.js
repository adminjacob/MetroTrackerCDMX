"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5160],{5160:(_,m,a)=>{a.r(m),a.d(m,{AdministradorUsuariosPageModule:()=>T});var l=a(6019),d=a(9010),o=a(6371),c=a(8725),g=a(8239),i=a(865),h=a(7524);function p(s,t){if(1&s&&i._UZ(0,"img",7),2&s){const r=i.oxw().$implicit;i.Q6J("src",r.imagenPerfil,i.LSH)}}function f(s,t){1&s&&i._UZ(0,"img",8)}function A(s,t){if(1&s){const r=i.EpF();i.TgZ(0,"ion-item-sliding"),i.TgZ(1,"ion-item"),i.TgZ(2,"ion-avatar",2),i.YNc(3,p,1,1,"img",3),i.YNc(4,f,1,0,"ng-template",null,4,i.W1O),i.qZA(),i.TgZ(6,"ion-label"),i.TgZ(7,"h2"),i._uU(8),i.qZA(),i.TgZ(9,"p"),i._uU(10),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"ion-item-options",5),i.TgZ(12,"ion-item-option",6),i.NdJ("click",function(){const u=i.CHM(r).$implicit;return i.oxw().confirmarEliminacion(u)}),i._uU(13," Eliminar "),i.qZA(),i.qZA(),i.qZA()}if(2&s){const r=t.$implicit,e=i.MAs(5);i.xp6(3),i.Q6J("ngIf",r.imagenPerfil)("ngIfElse",e),i.xp6(5),i.Oqu(r.nombreCompleto),i.xp6(2),i.Oqu(r.correo)}}const Z=[{path:"",component:(()=>{class s{constructor(r,e,n){this.toastController=r,this.userService=e,this.alertController=n,this.usuarios=[],this.usuariosFiltrados=[],this.searchTerm=""}ngOnInit(){this.userService.getUsers().subscribe(r=>{this.usuarios=r,this.usuariosFiltrados=r})}buscarUsuarios(){this.usuariosFiltrados=this.searchTerm?this.usuarios.filter(r=>r.nombreCompleto.toLowerCase().includes(this.searchTerm.toLowerCase())):this.usuarios}confirmarEliminacion(r){var e=this;return(0,g.Z)(function*(){yield(yield e.toastController.create({message:`\xbfDeseas eliminar a ${r.nombreCompleto}?`,duration:3e3,buttons:[{side:"end",text:"Eliminar",handler:()=>{e.eliminarUsuario(r._id)}}]})).present()})()}eliminarUsuario(r){var e=this;return(0,g.Z)(function*(){try{"Usuario eliminado de forma correcta"===(yield e.userService.deleteUser(r).toPromise())?(e.usuarios=e.usuarios.filter(u=>u._id!==r),e.usuariosFiltrados=e.usuariosFiltrados.filter(u=>u._id!==r)):yield(yield e.alertController.create({header:"Alerta",message:"Ocurri\xf3 un error al eliminar al usuario.",buttons:["OK"]})).present()}catch(n){console.log(n)}})()}}return s.\u0275fac=function(r){return new(r||s)(i.Y36(o.yF),i.Y36(h.K),i.Y36(o.Br))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-administrador-usuarios"]],decls:9,vars:2,consts:[[3,"ngModel","ngModelChange","ionChange"],[4,"ngFor","ngForOf"],["slot","start"],["class","user-image","alt","Foto de perfil",3,"src",4,"ngIf","ngIfElse"],["defaultImage",""],["side","end"],["color","danger",3,"click"],["alt","Foto de perfil",1,"user-image",3,"src"],["src","assets/imgs/hombre.png","alt","Foto de perfil predeterminada",1,"user-image"]],template:function(r,e){1&r&&(i.TgZ(0,"ion-header"),i.TgZ(1,"ion-toolbar"),i.TgZ(2,"ion-title"),i._uU(3,"Usuarios"),i.qZA(),i.qZA(),i.TgZ(4,"ion-toolbar"),i.TgZ(5,"ion-searchbar",0),i.NdJ("ngModelChange",function(u){return e.searchTerm=u})("ionChange",function(){return e.buscarUsuarios()}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"ion-content"),i.TgZ(7,"ion-list"),i.YNc(8,A,14,4,"ion-item-sliding",1),i.qZA(),i.qZA()),2&r&&(i.xp6(5),i.Q6J("ngModel",e.searchTerm),i.xp6(3),i.Q6J("ngForOf",e.usuariosFiltrados))},directives:[o.Gu,o.sr,o.wd,o.VI,o.j9,d.JJ,d.On,o.W2,o.q_,l.sg,o.td,o.Ie,o.BJ,l.O5,o.Q$,o.IK,o.u8],styles:['@charset "UTF-8";.user-image[_ngcontent-%COMP%]{width:50px;height:auto;margin-right:10px}']}),s})()}];let U=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[[c.Bz.forChild(Z)],c.Bz]}),s})(),T=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[[l.ez,d.u5,o.Pc,U]]}),s})()}}]);